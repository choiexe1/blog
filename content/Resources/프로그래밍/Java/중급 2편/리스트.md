---
title: 
tags:
  - java
  - programming
  - data-structure
  - collection-framework
publish: true
date: 2024-10-24
---
## 리스트 추상화
자바 기본편에서 학습한 [[Resources/프로그래밍/Java/기본/다형성|다형성]]과 OCP 원칙을 가장 잘 활용할 수 있는 곳 중에 하나가 바로 자료 구조이다.
자료 구조에 다형성과 OCP 원칙이 어떻게 적용되는지 알아본다.

**List 자료구조**

순서가 있고, 중복을 허용하는 자료 구조를 리스트(List)라고 한다.
지금까지 만든 `ArrayList`와 `LinkedList`는 내부 구현만 다를 뿐, 같은 기능을 제공하는 리스트 자료구조다.
내부 구현이 다르기 때문에 성능은 달라질 수 있지만 핵심은 사용자 입장에서 같은 기능을 사용한다는 것이다.

이 둘의 공통 기능을 인터페이스로 뽑아서 추상화하면 다형성을 활용한 다양한 이득을 얻을 수 있다.

![[리스트-추상화-01.png]]

같은 기능을 제공하는 메서드를 `MyList` 인터페이스로 추상화 한다.

```java
public interface MyList<E> {  
    int size();  
    void add(E e);  
    void add(int index, E e);  
    E get(int index);  
    E set(int index, E element);  
    E remove(int index);  
    int indexOf(E o);  
}
```

이제 전에 작성했던 `MyArrayList`, `MyLinkedList`를 위 `MyList` 인터페이스를 구현하도록 한다.

- `public class MyArrayList<E> implements MyList<E> {	... }`
- `public class MyLinkedList<E> implements MyList<E> { ... }`

메서드 이름이 같기 때문에 문제가 발생하지는 않는다. 추가로 재정의한 메서드에 `@Override` 어노테이션도 넣어주었다.

## 의존관계 주입
`MyArrayList`를 활용해서 많은 데이터를 처리하는 `BatchProcessor` 클래스를 개발하고 있다고 가정해보자, 그런데 막상 프로그램을 개발하고 보니 데이터를 앞에서 추가하는 일이 많은 상황이라면?

데이터를 앞에서 추가하거나 삭제하는 일이 많다면 `MyArrayList`보다는 `MyLinkedList`를 사용하는 것이 훨씬 효율적이다.

```java title="구체적인 BatchProcessor의 예시"
public class BatchProcessor {
	private final MyArrayList<Integer> list = new MyArrayList<>();

	public void logic(int size) {
		for (int i = 0; i < size; i++) {
			list.add(0, i); // 앞에 추가
		}
	}
}
```

`MyArrayList`를 사용해보니 성능이 너무 느려 `MyLinkedList`를 사용하도록 코드를 변경해야 한다. `BatchProcessor`의 내부 코드도 `MyLinkedList`를 사용하도록 함께 변경해야 한다.

```java title="연결 리스트로 코드 변경"
private final MyLinkedList<Integer> list = new MyLinkedList<>();
```

`BatchProcessor`는 구체적인 `MyArrayList` 또는 `MyLinkedList`를 사용하고 있다. 이것을 `BatchProcessor`가 구체적인 클래스에 의존한다고 표현한다.

이렇게 구체적인 클래스에 직접 의존하면 `MyArrayList`를 `MyLinkedList`로 변경할 때 마다 여기에 의존하는 `BatchProcessor`의 코드도 함께 수정해야 한다.

`BatchProcessor`가 구체적인 클래스에 의존하는 대신 추상적인 `MyList` 인터페이스에 의존하는 방법도 있다.



---
References: 

Links to this page: 