---
title: 
tags:
  - java
  - programming
  - spring
  - mvc
  - validation
publish: true
date: 2024-11-28
---
## Bean Validation - 소개
검증 기능을 지금처럼 매번 코드로 작성하는 것은 상당히 번거롭다. 특히 특정 필드에 대한 검증 로직은 대부분 빈 값인지, 특정 크기를 넘는지와 같이 매우 일반적인 로직이다.

`Node.js` 계열에선 `ClassValidator`를 통해 데코레이터로 검증했는데, `Bean Validation`은 이 `ClassValidator`와 유사하게 어노테이션으로 검증한다.

다음의 코드를 살펴보자

```java
public class Item {
	private Long id;

	@NotBlank	
	private String itemName;
	
	@NotNull
	@Range(min = 1000, max = 1000000)
	private Integer price;
	
	@NotNull
	@Max(9999)
	private Integer quantity;
}
```

앞서 설명했던 일반적인 검증 로직을 모든 프로젝트에 적용할 수 있게 공통화하고 표준화 한 것이 바로 `Bean Validation`이다. `Bean Validation`을 잘 활용하면 어노테이션 하나로 검증 로직을 매우 편리하게 적용할 수 있다.


> [!tip] Bean Validation 2.0 (JSR-380)
> 참고로 `Bean Validation`은 특정한 구현체가 아니라 `Bean Validation 2.0(JSR-380)`이라는 기술 표준이다. 쉽게 이야기해서 검증 어노테이션과 여러 인터페이스의 모음이다. 마치 `JPA`가 표준 기술이고 그 구현체로 하이버네이트가 있는 것과 같다.
> 
> `Bean Validation`을 구현한 기술 중에 일반적으로 사용하는 구현체는 하이버네이트 Validator이다. 이름이 하이버네이트가 붙어서 그렇지 ORM과는 관련이 없다.

- [Hibernate Validator 공식 사이트](http://hibernate.org/validator)
- [Hibernate Validator 공식 메뉴얼](https://docs.jboss.org/hibernate/validator/6.2/reference/en-US/html_single/)


## Bean Validation - 시작
Bean Validation 기능을 어떻게 사용하는지 코드로 알아본다. 먼저 스프링과 통합하지 않고 순수한 `Bean Validation` 사용법 부터 테스트 코드로 알아본다.

먼저 `build.gradle`에 다음의 의존관계를 추가해야한다.

```
implementation 'org.springframework.boot:spring-boot-starter-validation'
```

그리고 `Item` 클래스에 다음과 같이 `Bean Validation` 어노테이션을 적용한다.

```java
@Data  
public class Item {  
  
    private Long id;  
  
    @NotBlank  
    private String itemName;  
  
    @NotNull  
    @Range(min = 1_000, max = 1_000_000)  
    private Integer price;  
  
    @Max(999)  
    @NotNull  
    private Integer quantity;  
  
    public Item() {  
    }  
  
    public Item(String itemName, Integer price, Integer quantity) {  
        this.itemName = itemName;  
        this.price = price;  
        this.quantity = quantity;  
    }  
}
```

**검증 어노테이션**
- `@NotBlank`: 빈 값 + 공백은 허용되지 않는다.
- `@NotNull`: `null`을 허용하지 않는다.
- `@Range(min = 1_000, max = 1_000_000)`: 범위 안의 값이어야 한다.
- `@Max(999)`: 최대 999까지만 허용한다.


---
References: 김영한의 스프링 MVC 2편

Links to this page: 