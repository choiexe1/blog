---
title: 
tags:
  - java
  - programming
  - spring
  - mvc
  - exception
publish: true
date: 2024-12-01
---
## 서블릿 예외 처리
먼저 예외 처리에 대해서 알아보려면 스프링이 아닌 순수 서블릿 컨테이너가 예외를 어떻게 처리하는지 알아야 한다.

서블릿은 다음 2가지 방식으로 예외 처리를 지원한다.
- Exception(예외)
- response.sendError(HTTP 상태 코드, 오류 메시지)

어플리케이션 내부에서 예외가 발생하는 경우에, 서블릿까지 전파가 되면 다음의 흐름일 것이다.

```
WAS(여기까지 전파) <- 필터 <- 서블릿 <- 인터셉터 <- 컨트롤러 (예외 발생)
```


### Exception
**그렇다면 `WAS`가 `Exception`을 전달 받은 경우와 그렇지 않은 경우 어떻게 처리될까?**

Exception은 다음과 같이 처리된다.
- `Exception`을 전달 받은 경우
	- 내부적으로 처리할 수 없는 오류가 발생한 것으로 판단하고 서블릿 기본 오류 페이지와 함께 `HTTP 500` 상태코드를 반환한다.
- 그렇지 않은 경우
	- 서블릿 기본 오류 페이지와 함께 `HTTP 404` 상태코드를 반환한다.

### response.sendError(Http 상태 코드, 오류 메시지)

`HttpServletResponse` 객체가 제공하는 메서드이다. 이 메서드를 사용하면 당장 예외가 발생하는 것은 아니지만 서블릿 컨테이너에 예외가 발생했음을 알릴 수 있다.

또, 이 메서드는 상태 코드와 오류 메세지를 전달할 수 있다.

```
WAS <- 필터 <- 서블릿 <- 인터셉터 <- 컨트롤러(sendError() 호출)
```

`WAS`는 컨트롤러가 `sendError()`를 호출 했는지 확인하고, 호출 시의 상태 코드에 맞추어 기본 오류 페이지를 보여준다.

## 서블릿이 제공하는 오류 페이지 기능
서블릿 컨테이너가 기본으로 제공하는 오류 페이지는 사용자 친화적이지 않다. 따라서 서블릿이 제공하는 오류 페이지 기능을 통해서 두 가지 예외 처리 케이스를 좀 더 사용자 친화적으로 커스텀 할 수 있다.

지금은 스프링 부트를 통해서 서블릿 컨테이너를 실행하므로, 스프링 부트의 기능을 사용해서 서블릿 오류 페이지를 등록하면 된다.

### 오

---
References: 김영한의 스프링 MVC 2편

Links to this page: 