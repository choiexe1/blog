---
title: 
tags:
  - java
  - programming
  - spring
  - mvc
  - validation
publish: true
date: 2024-11-26
---
## 검증 요구사항
앞서 만들었던 상품 관리 시스템에 새로운 요구사항이 추가되었다.

```
- 타입 검증
	- 가격, 수량에 문자가 들어가면 오류 처리
- 필드 검증
	- 상품명: 필수, 공백 X
	- 가격: 1,000원 이상, 1,000,000원 이하
	- 수량: 최대 999
- 특정 필드의 범위를 넘어서는 검증
	- 가격 * 수량의 합은 10,000원 이상
```

지금까지 만든 웹 어플리케이션은 사용자로부터 데이터를 입력 받을 때 입력 값을 검증하지 않아서 숫자 값이 필요한 입력에 문자가 들어오면 바로 오류 화면으로 이동한다.

**컨트롤러의 중요한 역할 중 하나는 HTTP 요청이 정상인지 검증하는 것이다.** 이번에는 스프링 MVC에서 입력 값 검증을 어떻게 하는지 알아본다.

## BindingResult 1
스프링이 제공하는 검증 오류 처리 방법의 핵심인 `BindingResult`에 대해서 알아본다.

```java
public String addItem(
	@ModelAttribute Item item, 
	BindingResult bindingResult, 
	RedirectAttributes redirectAttributes,  
	Model model)
```

`BindingResult`는 파라미터 위치가 중요한데, 반드시 `@ModelAttribute` 다음에 와야 한다. 에러를 추가하는 방법은 다음의 코드와 같으며, 필드 에러일 경우 `FieldError` 객체를 사용한다.

```java
bindingResult.addError(new FieldError("item", "itemName", "상품 이름은 필수입니다."));
```

```java
public FieldError(String objectName, String field, String defaultMessage) {
	...
}
```

- **objectName**: `@ModelAttribute` 어노테이션이 적용된 객체의 이름
- **field**: 오류가 발생한 필드 이름
- **defaultMessage**: 오류 기본 메시지

만약 특정 필드의 범위를 넘어서는 복합 오류가 있으면 `ObjectError` 객체를 생성해서 다음과 같이`BindingResult`에 첫 번째 파라미터로 담으면 된다.

```java
bindingResult.addError(
	new ObjectError("item", 
	"가격 * 수량의 합은 10,000원 이상이어야 합니다. 현재 값 = " + resultPrice)
);
```

마지막으로, `BindingResult`는 `Model` 객체에 따로 담지 않아도 사용할 수 있다.

---
References: 김영한의 스프링 MVC 2편

Links to this page: 