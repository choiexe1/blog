---
title: 
tags:
  - java
  - programming
  - spring
publish: true
date: 2024-11-18
---
## 다양한 의존관계 주입 방법
의존관계 주입은 다음과 같이 크게 4가지 방법이 있다.
- 생성자 주입
- 수정자 주입(setter 주입)
- 필드 주입
- 일반 메서드 주입

### 생성자 주입
지금까지 주로 사용했던 방법이다. 생성자를 통해서 의존 관계를 주입한다.

**특징**
- 생성자 호출 시점에 딱 1번만 호출되는 것이 보장된다.
- **불변**, **필수** 의존관계에 사용한다.

```java
@Component  
public class OrderServiceImpl implements OrderService {  
    private final MemberRepository memberRepository;  
    private final DiscountPolicy discountPolicy;
    
	@Autowired  
	public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {  
	    this.memberRepository = memberRepository;  
	    this.discountPolicy = discountPolicy; 
	}
}
```

> [!summary] @Autowired 생략
> 스프링 빈 컴포넌트에 생성자가 딱 1개만 존재하면, `@Autowired`를 생략해도 자동 주입 된다.
> 
> 이유는 생성자가 2개라면 스프링 컨테이너 입장에서, 어떤 생성자를 통해서 의존관계를 주입해야 할 지 모호성이 생기기 때문이다.

### 수정자 주입 (setter 주입)
필드 값을 변경하는 수정자 메서드인 세터를 통해서 의존관계를 주입하는 방법이다.

**특징**
- **선택**, **변경** 가능성이 있는 의존관계에 사용
- 자바 빈 프로퍼티 규약의 수정자 메서드 방식을 사용하는 방법이다.

```java
@Component  
public class OrderServiceImpl implements OrderService {  
    private MemberRepository memberRepository;  
    private DiscountPolicy discountPolicy;

	@Autowired
	public void setMemberRepository(MemberRepository memberRepository) {
		this.memberRepository = memberRepository;
	}
	
	@Autowired
	public void setDiscountPolicy(DiscountPolicy discountPolicy) {
		this.discountPolicy = discountPolicy;
	}
}
```

> [!summary] @Autowired의 기본 동작
> `@Autowired`의 기본 동작은 주입할 대상이 없으면 오류가 발생한다. 주입할 대상이 없어도 동작하게 하려면 `@Autowired(required = false)`로 지정하면 된다.

---
References: 김영한의 스프링 핵심 원리 - 기본편

Links to this page: 