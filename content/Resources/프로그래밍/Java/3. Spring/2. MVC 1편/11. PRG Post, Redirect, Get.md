---
title: 
tags:
  - java
  - programming
  - spring
  - mvc
publish: true
date: 2024-11-24
---
## PRG Post, Redirect, Get
다음의 상품 등록 처리 컨트롤러는 심각한 문제가 있다. 상품 등록을 완료하고 웹 브라우저의 새로고침 버튼을 클릭해보면 상품이 계속해서 중복 등록 되는 것을 알 수 있다.

```java
@Controller  
@RequestMapping("/basic/items")  
@RequiredArgsConstructor  
public class BasicItemController {  
    private final ItemRepository itemRepository;  
  
    @GetMapping  
    public String items(Model model) {  
        List<Item> items = itemRepository.findAll();  
        model.addAttribute("items", items);  
        return "basic/items";  
    }  
  
    @GetMapping("/{itemId}")  
    public String item(@PathVariable long itemId, Model model) {  
        Item item = itemRepository.findById(itemId);  
        model.addAttribute("item", item);  
        return "basic/item";  
    }  
  
    @GetMapping("/add")  
    public String addForm() {  
        return "basic/addForm";  
    }  
  
    @PostMapping("/add")  
    public String save(Item item) {  
        itemRepository.save(item);  
        return "basic/item";  
    }  
  
    @GetMapping("/{itemId}/edit")  
    public String editForm(@PathVariable long itemId, Model model) {  
        Item item = itemRepository.findById(itemId);  
  
        model.addAttribute("item", item);  
        return "basic/editForm";  
    }  
  
    @PostMapping("/{itemId}/edit")  
    public String edit(@PathVariable long itemId, Item item) {  
        itemRepository.update(itemId, item);  
        return "redirect:/basic/items/{itemId}";  
    }  
  
    @PostConstruct  
    public void init() {  
        itemRepository.save(new Item("itemA", 10000, 10));  
        itemRepository.save(new Item("itemB", 20000, 20));  
    }  
}
```


---
References: 김영한의 스프링 MVC 1편

Links to this page: 