---
title: 
tags:
  - java
  - programming
  - spring
  - aop
  - proxy
publish: true
date: 2025-01-04 07:10
comments: true
---
## 배경

#### 핵심 기능과 부가 기능
- 어플리케이션 로직은 크게 **핵심 기능**과 **부가 기능**으로 나눌 수 있다.
- 핵심 기능은 특정 객체가 제공하는 고유의 기능이다. 예를 들어 `OrderService`의 핵심 기능은 주문 로직이다.
- 부가 기능은 핵심 기능을 보조하기 위해 제공되는 기능이다. 예를 들어 로그 추적, 트랜잭션 기능등이 있다.
- 이런 부가 기능은 단독으로는 사용되지 않는다. 예를 들어 로그 추적 기능은 어떤 핵심 기능이 호출되었는지 로그를 남기기 위해서 사용한다.

#### 횡단 관심사(cross-cutting concerns)
![[aop-1.png]]
- 보통 부가 기능은 여러 클래스에 걸쳐서 함께 사용된다. 예를 들면 모든 어플리케이션 호출을 로깅해야 하는 요구사항 같은 경우다.
- 이러한 부가 기능은 횡단 관심사가 된다. 쉽게 이야기해서 하나의 부가 기능이 여러 곳에서 동일하게 사용된다는 뜻이다.

#### 부가 기능 적용 문제
- 그런데 이런 부가 기능을 어플리케이션 전반에 공통적으로 적용하는 것은 쉬운 일이 아니다.
	- 적용해야 할 클래스가 100개라면 100개 모두 적용해야 한다.
	- 핵심 기능과 부가 기능이 섞여 가독성을 해치고, 유지보수를 어렵게 한다.
	- 부가 기능이 여러 곳에 퍼져서 중복 코드를 만들어낸다.
	- 부가 기능을 변경할 때 중복 때문에 많은 수정이 필요하다.
	- 부가 기능의 적용 대상을 변경할 때 많은 수정이 필요하다.
- 부가 기능처럼 특정 로직을 어플리케이션 전반에 적용하는 문제는 일반적인 OOP 방식으로는 해결이 어렵다.

#### 핵심 기능과 부가 기능 분리
- 누군가는 이런 부가 기능 도입의 문제 해결을 위해 오랜 기간 고민했다.
- **애스펙트 Aspect**는 이런 부가 기능 도입의 문제를 해결하기 위해 만들어진 모듈이다.
- 부가 기능과 핵심 기능을 분리하고, 부가 기능을 어디에 적용할 지 정의한 것이다.
- 스프링이 제공하는 **어드바이저**도 **어드바이스**와 **포인트컷**을 가지고 있어서 개념상 하나의 애스펙트이다.

#### 애스펙트 Aspect
![[aop-2.png]]

- 애스펙트는 해석하면 관점이라는 뜻인데, 이름 그대로 어플리케이션을 바라보는 관점을 하나 하나의 기능에서 횡단 관심사 관점으로 달리 보는 것이다.
- 이렇게 애스펙트를 사용한 프로그래밍 방식을 **관점 지향 프로그래밍 AOP(Aspect-Oriented Programming)**라 한다.
- 이 AOP는 OOP를 대체하기 위한 것이 아니라, 횡단 관심사를 깔끔하게 처리하기 어려운 OOP를 보조하는 목적으로 개발되었다.


## AspectJ 프레임워크
- AOP의 대표적인 구현으로는 [AspectJ 프레임워크](https://www.eclipse.org/aspectj/)가 있다.
- 스프링도 AOP를 지원하지만 대부분 `AspectJ`의 문법을 차용하고, `AspectJ`가 제공하는 기능의 일부만 제공한다.

## AOP 적용 방식
- AOP를 사용하면 핵심 기능과 부가 기능이 코드상 완전히 분리되어 관리된다.
- 


---

References: 김영한의 스프링 핵심 원리 - 고급편

Links to this page:
