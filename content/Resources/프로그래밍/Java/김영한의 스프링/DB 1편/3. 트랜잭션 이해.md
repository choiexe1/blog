---
title: 
tags:
  - java
  - programming
  - transaction
  - database
  - jdbc
publish: true
date: 2024-12-11
---
## 트랜잭션 개념 이해
사실 데이터를 저장할 때 단순히 파일에 저장해도 되는데, 데이터베이스에 저장하는 이유는 무엇일까? 이는 여러가지 이유가 있지만 가장 대표적인 이유는 바로 **데이터베이스는 트랜잭션이라는 개념을 지원**하기 때문이다.

트랜잭션을 이름 그대로 번역하면 거래라는 뜻이다. 이것을 쉽게 풀어서 이야기하면, 데이터베이스에서 트랜잭션은 하나의 거래를 안전하게 처리하도록 보장해주는 것을 뜻한다. 그런데 하나의 거래를 안전하게 처리하려면 생각보다 고려해야 할 점이 많다.

예를 들어서 A의 5000원을 B에게 계좌이체한다고 생각해보자. A의 잔고를 5000원 감소하고, B의 잔고를 5000원 증가해야한다.

**5000원 계좌이체 트랜잭션**
1. A의 잔고를 5000원 감소
2. B의 잔고를 5000원 증가

계좌이체라는 거래는 이렇게 두 가지 작업이 합쳐져서 하나의 작업처럼 동작해야 한다. 만약 1번은 성공했는데 2번에서 시스템에 문제가 발생하면 계좌 이체는 실패하고 A의 잔고만 5000원 감소하는 심각한 문제가 발생한다.

데이터베이스가 제공하는 트랜잭션 기능을 사용하면 1번과 2번 둘 다 함께 성공해야 저장하고, 중간에 하나라도 실패하면 거래 전의 상태로 되돌아갈 수 있다. 쉽게 말해 두 가지 작업 중 하나라도 실패하면, 실패하기 전의 상태로 완전히 되돌리는 것이다. 

결과적으로 2번 과정이 실패해도 A의 잔고가 감소하지 않는다.

모든 작업이 성공해서 데이터베이스에 정상 반영하는 것을 커밋(commit)이라고 하고, 작업 중 하나라도 실패해서 거래 이전으로 디돌리는 것을 롤백(rollback)이라 한다.

## 트랜잭션 ACID
트랜잭션은 ACID라 하는 네 가지 요소를 보장해야 한다. ACID를 이루는 네 가지 요소는 다음과 같다.

- 원자성(Atomicity): 트랜잭션 내에서 실행한 작업들은 마치 하나의 작업인 것처럼 모두 성공하거나 모두 실패해야 한다.
- 일관성(Consistency): 모든 트랜잭션은 일관성 있는 데이터베이스 상태를 유지해야 한다. 예를 들어 데이터베이스에서 정한 무결성 제약 조건을 항상 만족해야 한다.
- 격리성(Isolation):
- 지속성(Durability): 






---
References: 김영한의 스프링 DB 1편

Links to this page: 