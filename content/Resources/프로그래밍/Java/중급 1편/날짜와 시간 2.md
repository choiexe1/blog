---
title: 
tags:
  - java
  - programming
publish: true
date: 2024-09-25
---
## 날짜와 시간의 핵심 인터페이스

날짜와 시간은 [[날짜와 시간 1#시간의 간격]]에 작성된 내용처럼, 특정 시점의 시간(시각)과 시간의 간격(기간)으로 나눌 수 있다.

![[java-date-00.png]]

특정 시점의 시간은 `Temporal(TemporalAccessor 포함)` 인터페이스를 구현한다. 

시간의 간격(기간)은 `TemporalAmount` 인터페이스를 구현한다.

**TemporalAccessor 인터페이스**
- 날짜와 시간을 읽기 위한 기본 인터페이스
- 이 인터페이스는 특정 시점의 날짜와 시간 정보를 읽을 수 있는 최소한의 기능을 제공한다.

**Temporal 인터페이스**
`TemporalAccessor`의 하위 인터페이스로, 날짜와 시간을 조작(추가, 빼기 등)하기 위한 기능을 제공한다. 이를 통해 날짜와 시간을 변경하거나 조정할 수 있다.

간단히 말하면 `TemporalAccessor`는 읽기 전용 접근을, `Temporal`은 읽기와 쓰기 모두를 지원한다.

**TemporalAmount 인터페이스**
시간의 간격(시간의 양, 기간)을 나타내며 날짜와 시간 객체에 적용하여 그 객체를 조정할 수 있다. 예를 들어, 특정 날짜에 일정 기간을 더하거나 빼는 데 사용된다.

## 시간의 단위와 시간 필드
![[java-date-01.png]]
시간의 단위를 뜻하는 `TemporalUnit (ChronoUnit)`과 시간의 각 필드를 뜻하는 `TemporalField (ChronoField)`가 있다.

**시간의 단위 - TemporalUnit, ChronoUnit**
`TemporalUnit` 인터페이스는 날짜와 시간을 측정하는 단위를 나타내며, 주로 사용되는 구현체는 `java.time.temporal.ChronoUnit` 열거형으로 구현되어 있다.

### ChronoUnit
`ChronoUnit`은 다양한 시간 단위를 제공한다.

앞서 학습했듯 `Enum`도 내부적으로 클래스이므로 다양한 메서드가 구현되어 있다.

![[java-date-02.png]]
`ChronoUnit`은 내부에 `String name`과 `Duration duration`을 가지게 되어 있다.

```java title="ChronoUnitMain.java"
import java.time.LocalTime;  
import java.time.temporal.ChronoUnit;  
  
public class ChronoUnitMain {  
  
  public static void main(String[] args) {  
    ChronoUnit[] values = ChronoUnit.values();  
    for (ChronoUnit value : values) {  
      System.out.println("value = " + value);  
    }  
  
    System.out.println("HOURS = " + ChronoUnit.HOURS);  
    System.out.println("HOURS.duration = " + ChronoUnit.HOURS.getDuration().getSeconds());  
    System.out.println("DAYS = " + ChronoUnit.DAYS);  
  
    // 차이 구하기  
    LocalTime lt1 = LocalTime.of(1, 10, 0);  
    LocalTime lt2 = LocalTime.of(1, 20, 0);  
    long between = ChronoUnit.SECONDS.between(lt1, lt2);  
    System.out.println(between);  
  }  
}

```

`ChronoUnit`을 사용하면 두 날짜 또는 시간 사이의 차이를 `ChronoUnit`에 정의되어 있는 단위로 쉽게 계산할 수 있다. 예제 코드에서는 두 `LocalTime` 객체 간의 차이를 초 단위로 구한다.

### ChronoField
`TemporalField` 인터페이스는 날짜와 시간을 나타내는데 사용된다. 주로 사용되는 구현체는 `java.time.temporal.ChronoField` 열거형이다.

`ChronoField`는 날짜 및 시간을 나타내는 데 사용되는 열거형이다. 이 열거형은 다양한 필드를 통해 **날짜와 시간의 특정 부분을 나타낸다.** 여기에는 연도, 월, 일, 시간, 분 등이 포함된다.

여기서 필드(Field)는 날짜와 시간 중에 있는 특정 필드들을 의미한다. 각각의 필드 항목은 아래를 참고하자.

예시 날짜인 2024년 8월 16일을 이루는 각각의 필드는 다음과 같다.
- YEAR: 2024
- MONTH_OF_YEAR: 8
- DAY_OF_MONTH: 16

단순히 시간의 단위 하나하나를 뜻하는 `ChronoUnit`과는 다른 것을 알 수 있다. `ChronoField`를 사용해야 날짜와 시간의 각 필드 중에 원하는 데이터를 조회할 수 있다.

```java title="ChronoFieldMain.java"
import java.time.temporal.ChronoField;  
  
public class ChronoFieldMain {  
  
  public static void main(String[] args) {  
    ChronoField[] values = ChronoField.values();  
    for (ChronoField value : values) {  
      System.out.println(value + ", range = " + value.range());  
    }  
  
    System.out.println("ChronoField.MONTH_OF_YEAR.range() = " + ChronoField.MONTH_OF_YEAR.range());  
  }  
}
```

> [!tip]
> `TemporalUnit(ChronoUnit)`, `TemporalField(ChronoField)`는 단독으로 사용하기 보다, 주로 날짜와 시간을 조회하거나 조작할 때 사용한다.

## 날짜와 시간 조회하고 조작하기 1

### 읽기 (조회)
날짜와 시간을 조회하려면 날짜와 시간 항목중에 어떤 필드를 조회할 지 선택해야 한다. 이 때 날짜와 시간의 필드를 뜻하는 `ChronoField`가 사용된다.

```java title="GetTimeMain.java"
import java.time.LocalDateTime;
import java.time.temporal.ChronoField;

public class GetTimeMain {

  public static void main(String[] args) {
    LocalDateTime dt = LocalDateTime.of(2030, 1, 1, 13, 30, 59);
    System.out.println("YEAR = " + dt.get(ChronoField.YEAR));
    System.out.println("MONTH_OF_YEAR = " + dt.get(ChronoField.MONTH_OF_YEAR));
    System.out.println("DAY_OF_MONTH = " + dt.get(ChronoField.DAY_OF_MONTH));
    System.out.println("HOUR_OF_DAY = " + dt.get(ChronoField.HOUR_OF_DAY));
    System.out.println("MINUTE_OF_HOUR = " + dt.get(ChronoField.MINUTE_OF_HOUR));
    System.out.println("SECOND_OF_MINUTE = " + dt.get(ChronoField.SECOND_OF_MINUTE));
  }
}

// 출력 결과
// YEAR = 2030
// MONTH_OF_YEAR = 1
// DAY_OF_MONTH = 1
// HOUR_OF_DAY = 13
// MINUTE_OF_HOUR = 30
// SECOND_OF_MINUTE = 59
```

```java title="LocalDateTime.get()"
@Override  
public int get(TemporalField field) {  
    if (field instanceof ChronoField chronoField) {  
        return (chronoField.isTimeBased() ? time.get(field) : date.get(field));  
    }  
    return ChronoLocalDateTime.super.get(field);  
}
```
`get()` 메서드는 인자로 `TemporalField`를 입력 받는다. `ChronoField`는 해당 인터페이스를 구현한다.

[[Resources/프로그래밍/Java/기본/다형성#다형적 참조|다형적 참조]]를 통해 `ChronoField`를 입력 받고, 만약 인자가 `ChronoField`라면 해당 `Enum`에 구현되어 있는 메서드를 사용하여 결과를 반환한다.

> [!tip]
> 일반적으로는 `get()`을 사용하는 것이 아니라 편의 메서드를 사용한다고 한다.
> 
> `ChronoField`의 특정 타입의 편의 메서드가 없는 경우가 존재한다. 직접 `get()` 메서드를 통하여 구해야 한다.

### 쓰기 (조작)
날짜와 시간을 조작하려면 어떤 시간 단위(Unit)를 변경할 지 선택해야 한다. 이때 날짜와 시간의 단위를 뜻하는 `ChronoUnit` 이 사용된다.

```java title="ChangeTimePlusMain.java"
import java.time.LocalDateTime;  
import java.time.Period;  
import java.time.temporal.ChronoUnit;  
  
public class ChangeTimePlusMain {  
  
  public static void main(String[] args) {  
    LocalDateTime dt = LocalDateTime.of(2018, 1, 1, 13, 30, 59);  
    LocalDateTime plusDt1 = dt.plus(10, ChronoUnit.YEARS);  
    System.out.println("plusDt1 = " + plusDt1);  
  
    LocalDateTime plusDt2 = dt.plusYears(10);  
    System.out.println("plusDt2 = " + plusDt2);  
  
    Period period = Period.ofYears(10);  
    LocalDateTime plusDt3 = dt.plus(period);  
    System.out.println("plusDt3 = " + plusDt3);  
  }  
}
```

`LocalDateTime`을 포함한 특정 시점의 시간을 제공하는 클래스는 모두 `Temporal` 인터페이스를 구현한다. 그리고 `Temporal` 인터페이스는 특정 시점의 시간을 조작하는 기능을 제공한다.

`plus(long amountToAdd, TemporalUnit unit)`을 호출할 때 더할 양과 단위를 전달하면 된다. 이 때 `TemporalUnit`의 구현인 `ChronoUnit`을 단위로 전달하면 된다.

`Period`를 통해 특정 시점의 시간에, 기간을 더할 수 있다.

마찬가지로 편의 메서드가 제공된다.

**With() 메서드**
`Temporal with(TemporalField field, long newValue)`를 사용하면 날짜와 시간의 특정 필드 값을 변경할 수 있다. 날짜와 시간에 관련한 모든 객체는 불변이므로 반환 값을 받아야 한다.

```java title="ChangeTimeWithMain.java"
import java.time.DayOfWeek;  
import java.time.LocalDateTime;  
import java.time.temporal.ChronoField;  
import java.time.temporal.TemporalAdjusters;  
  
public class ChangeTimeWithMain {  
  
  public static void main(String[] args) {  
    LocalDateTime dt = LocalDateTime.of(2018, 1, 1, 13, 30, 59);  
    System.out.println("dt = " + dt);  
  
    LocalDateTime changedDt1 = dt.with(ChronoField.YEAR, 2020);  
    System.out.println("changedDt1 = " + changedDt1);  
  
    LocalDateTime changedDt2 = dt.withYear(2023);  
    System.out.println("changedDt2 = " + changedDt2);  
  
    // TemporalAdjuster 사용  
    // ex) 다음주 금요일  
    LocalDateTime with1 = dt.with(TemporalAdjusters.next(DayOfWeek.FRIDAY));  
    System.out.println("기준 날짜 = " + dt);  
    System.out.println("다음 금요일 날짜 = " + with1);  
  
    // ex) 이번 달의 마지막 일요일  
    LocalDateTime with2 = dt.with(TemporalAdjusters.lastInMonth(DayOfWeek.SUNDAY));  
    System.out.println("같은 달의 마지막 일요일 = " + with2);  
  }  
}
```

**TemporalAdjuster 사용**
`with()`는 아주 단순한 날짜만 변경할 수 있다. 그러나 다음 주 금요일 또는 이번 달의 마지막 일요일 같은 특정 시점의 날짜를 계산하고 싶다면 `TemporalAdjusters`를 사용하면 된다.

원래라면 `TemporalAdjuster` 인터페이스를 구현하여 `TemporalAdjusters`같은 구현을 만들어야겠지만, 자바는 이미 필요한 구현체들을 `TemporalAdjusters`에 다 만들어두었다.

- `TemporalAdjusters.next(DayOfWeek.FRIDAY)` : 다음주 금요일을 구한다.
- `TemporalAdjusters.lastInMonth(DayOfWeek.SUNDAY)` : 이번 달의 마지막 일요일을 구한다.

> [!tip] 참고
> `DayOfWeek`은 월, 화, 수, 목, 금, 토, 일을 나타내는 열거형이다.

마찬가지로 편의 메서드가 제공 된다.

> [!note] 핵심 정리
> 조회에는 `TemporalField` 구현인 `ChronoField`가 사용되고, 조작에는 `TemporalUnit`의 구현인 `ChronoUnit`이 사용된다.
> 
> 복잡한 날짜 계산에는 `TemporalAdjusters`를 사용한다.
> 
> 날짜와 시간을 다루는 객체는 모두 불변객체이다. 따라서 꼭 반환 값을 받아야 한다.

## 날짜와 시간 문자열 파싱과 포매팅

- [[포매팅]]: 날짜와 시간 데이터를 원하는 양식의 문자열로 변경하는 것 (`Date` > `String`)
- [[파싱]]: 문자열을 날짜와 시간 데이터로 변경하는 것 (`String` > `Date`)

---
References: 김영한의 실전 자바 - 중급 1편

Links to this page: [[날짜와 시간 1]], [[Resources/프로그래밍/Java/기본/다형성|다형성]], [[포매팅]], [[파싱]]