---
title: 
tags:
  - java
  - programming
  - spring
  - exception
publish: true
date: 2024-12-14
---
## 체크 예외와 인터페이스
서비스 계층은 가급적 특정 구현 기술에 의존하지 않고, 순수하게 유지하는 것이 좋다. 이렇게 하려면 예외에 대한 의존도 함께 해결해야 한다.

예를 들어서 서비스가 처리할 수 없는 `SQLException`에 대한 의존을 제거하려면 어떻게 해야할까?

서비스가 처리할 수 없으므로 리포지토리가 던지는 `SQLException` 체크 예외를 런타임 예외로 전환해서 서비스 계층에 던지면 서비스 계층이 해당 예외를 무시할 수 있기 때문에, 특정 구현 기술에 의존하는 부분을 제거하고 서비스 계층을 순수하게 유지할 수 있다.

### 인터페이스 도입
먼저 `MemberRepository` 인터페이스도 도입해서 구현 기술을 쉽게 변경할 수 있도록 변경한다.

```java
public interface MemberRepository {
	Member save(Member member);
	Member findById(String memberId);
	void update(String memberId, int money);
	void delete(String memberId);
}
```

그런데 앞서서 예제를 시작할 때부터 왜 이런 인터페이스를 만들지 않았을까? 바로 `SQLException`이 체크 예외이기 때문이다. 

체크 예외를 사용하려면 인터페이스에도 해당 체크 예외가 선언되어 있어야 한다. 예를 들면 다음과 같은 코드가 된다.

```java
public interface MemberRepositoryEx {
	Member save(Member member) throws SQLException;
	Member findById(String memberId) throws SQLException;
	void update(String memberId, int money) throws SQLException;
	void delete(String memberId) throws SQLException;
}
```

#### 체크 예외 코드에 인터페이스 도입시 문제점 - 구현 클래스

```java
@Slf4j
public class MemberRepositoryV3 implements MemberRepositoryEx {
public Member save(Member member) throws SQLException {
String sql = "insert into member(member_id, money) values(?, ?)";
}
}
```

---
References: 김영한의 스프링 DB 1편

Links to this page: 