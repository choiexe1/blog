---
title: 
tags:
  - java
  - programming
  - spring
  - test
  - database
publish: true
date: 2024-12-15
---
## 테스트 - 데이터베이스 연동
데이터 접근 기술에 대해서 더 알아보기 전에 데이터베이스에 연동하는 테스트에 대해서 알아본다. 데이터 접근 기술은 실제 데이터베이스에 접근해서 데이터를 잘 저장하고 조회할 수 있는지 확인하는 것이 필요하다.

지금부터 테스트를 실행할 때 실제 데이터베이스를 연동해서 진행해본다. 앞서 개발한 `ItemRepositoryTest`를 통해서 테스트를 진행한다.

테스트를 실행하기 전에 먼저 지금까지 설정한 `application.properties`를 확인해보자.

```properties title="main/application.properties"
spring.profiles.active=local  
spring.datasource.url=jdbc:h2:tcp://localhost/~/test  
spring.datasource.username=sa  
spring.datasource.password=  
logging.level.org.springframework.jdbc=debug
```

다음으로 `test/application.properties`를 확인해본다.

```properties title="test/application.properties"
spring.profiles.active=test
```

테스트 케이스는 `src/test` 경로에 있기 때문에 실행하면 `src/test`에 있는 `application.properties` 파일이 우선 순위를 가지고 실행된다.

그런데 문제는 테스트용 설정에는 `spring.datasource.url`과 같은 데이터베이스 연결 설정이 없다는 점이다. 테스트 케이스에서도 데이터베이스에 접속할 수 있게 `test/application.properties`를 다음과 같이 수정하자.

```properties title="test/application.properties"
spring.profiles.active=test  
spring.datasource.url=jdbc:h2:tcp://localhost/~/test  
spring.datasource.username=sa  
spring.datasource.password=  
logging.level.org.springframework.jdbc=debug
```

## 테스트 실행 - 로컬 DB
`ItemRepositoryTest` 테스트 코드를 확인해보자.

```java
@SpringBootTest  
class ItemRepositoryTest {
```

`ItemRepositoryTest`는 `@SpringBootTest`를 사용한다. `@SpringBootTest`는 `@SpringBootApplication`을 찾아서 설정으로 사용한다.

예를 들면 현재는 



---
References: 김영한의 스프링 DB 2편

Links to this page: 