---
title: 
tags:
  - java
  - programming
  - transaction
  - exception
publish: true
date: 2024-12-27
---
## 예외와 트랜잭션 커밋, 롤백 - 기본

예외가 발생했는데, 내부에서 예외를 처리하지 못하고 트랜잭션 범위 밖(`@Transactional이 적용된 AOP`)으로 예외를 던지면 어떻게 될까?

![[transaction-exception-1.png]]

예외 발생 시 스프링 트랜잭션 AOP는 예외의 종류에 따라 트랜잭션을 커밋하거나 롤백한다.
- 언체크 예외인 `RuntimeException`, `Error`와 그 하위 예외가 발생하면 트랜잭션을 롤백한다.
- 체크 예외인 `Exception`과 그 하위 예외가 발생하면 트랜잭션을 커밋한다.

먼저 예제 코드를 작성하기 전에 트랜잭션의 작동을 로그로 확인하기 위해 다음 설정을 추가한다.
```properties title="application.properties"
logging.level.org.springframework.transaction.interceptor=TRACE  
logging.level.org.springframework.jdbc.datasource.DataSourceTransactionManager=DEBUG  
#JPA log  
logging.level.org.springframework.orm.jpa.JpaTransactionManager=DEBUG  
logging.level.org.hibernate.resource.transaction=DEBUG
```


```java

```

---
References: 김영한의 스프링 DB 2편

Links to this page: 