---
title: 
tags:
  - java
  - programming
  - spring
  - mvc
  - type-converter
publish: true
date: 2024-12-05
---
## 스프링 타입 컨버터 소개
문자를 숫자로 변환하거나, 반대로 숫자를 문자로 변환해야 하는 것 처럼 어플리케이션을 개발하다 보면 타입을 변환해야 하는 경우가 상당히 많다.

다음 케이스를 살펴보자.

```java
@RestController  
public class HelloController {  
    @GetMapping("/hello-v1")  
    public String helloV1(HttpServletRequest request) {  
        String data = request.getParameter("data");  
        Integer intValue = Integer.valueOf(data);  
        System.out.println("intValue = " + intValue);  
        return "ok";  
    }  
}
```

HTTP 요청 파라미터는 모두 문자로 처리되기 때문에 요청 파라미터를 자바에서 다른 타입으로 변환해서 사용하고 싶으면 다음과 같이 숫자 타입으로 변환하는 과정을 거쳐야 한다.

> `helloV1` 컨트롤러는 요청의 쿼리 파라미터 `data`를 가져와서 `Integer` 타입으로 변환한다.

이번에는 스프링 MVC가 제공하는 `@RequestParam`을 사용해보자.

```java
@GetMapping("/hello-v2")  
public String helloV2(@RequestParam Integer data) {  
    System.out.println("data instanceof Integer = " + (data instanceof Integer));  
    return "ok";  
}
```

스프링이 제공하는 `@RequestParam`을 사용하면 문자로 처리되는 요청 파라미터가 `Integer`로 타입 변환 되어 숫자로 편리하게 받을 수 있다. **이것은 스프링이 중간에서 타입을 변환해주었기 때문이다**.

이러한 예는 `@ModelAttribute`, `@PathVariable`에서도 확인할 수 있다.

#### 스프링의 타입 변환 적용 예시
- 스프링 MVC 요청 파라미터
	- `@RequestParam`, `@ModelAttribute`, `@PathVariable`
- `@Value`등으로 YML 정보 읽기
- XML에 넣은 스프링 빈 정보 반환
- 뷰를 렌더링 할 때

#### 스프링과 타입 변환
이렇게 타입을 변환해야 하는 경우는 상당히 많다. 개발자가 직접 하나하나 타입 변환을 해야 한다면, 생각만 해도 괴로울 것이다. 스프링이 중간에 타입 변환기를 사용해서 타입을 `String` -> `Integer`로 변환해주었기 때문에 개발자는 편리하게 해당 타입을 바로 받을 수 있다.

앞에서는 문자를 숫자로 변경하는 예시를 들었지만, 반대로 숫자를 문자로 변경하는 것도 가능하고 `Boolean`을 숫자로 변경하는 것도 가능하다. 그렇다면 만약 개발자가 새로운 타입을 만들어서 변환하고 싶으면 어떻게 하면 될까?

### 컨버터 인터페이스
```java
@FunctionalInterface  
public interface Converter<S, T> {  
    @Nullable  
    T convert(S source);  
  
    default <U> Converter<S, U> andThen(Converter<? super T, ? extends U> after) {  
        Assert.notNull(after, "'after' Converter must not be null");  
        return (s) -> {  
            T initialResult = (T)this.convert(s);  
            return initialResult != null ? after.convert(initialResult) : null;  
        };  
    }  
}
```

스프링은 확장 가능한 컨버터 인터페이스를 제공한다.

개발자는 스프링에 추가적인 타입 변환이 필요하면 이 컨버터 인터페이스를 구현해서 등록하면 된다. 이 컨버터 인터페이스는 제네릭을 통해 모든 타입에 적용할 수 있다. 필요하면 X -> Y 타입으로 변환하는 컨버터 인터페이스를 만들고, Y -> X 타입으로 변환하는 컨버터 인터페이스를 만들어서 등록하면 된다.

예를 들어서 문자 `"true"`가 오면 `Boolean` 타입으로 받고 싶으면 `String` -> `Boolean` 타입으로 변환 되도록 

---
References: 김영한의 스프링 MVC 2편

Links to this page: 